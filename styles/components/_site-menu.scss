@use "../core/index" as core;

:root {
  --menu-w: min(360px, 86vw);

  /* ギャラリーと調和する濃紺ガラス 初期値0.78 */
  --panel-bg: rgb(14 16 32 / 60%);
  --panel-bd: rgb(255 255 255 / 18%);
}

body.gallery,
body.universe,
body.about {
  span.icon-size {
    font-size: 44px;
  }

  @media (width >= 375px) and (width <= 1080px) and (orientation: portrait) {
    header.site-header {
      width: 100svw;
      height: 10svh;

      // background-color: core.$test-bg4;
    }
  }
}

.offcanvas,
.offcanvas-backdrop {
  position: fixed;
  top: 0;
  bottom: 0;
}

/* パネル本体（右から） */
.offcanvas {
  right: 0;
  width: var(--menu-w);
  padding: 16px clamp(12px, 3vw, 24px);
  background: var(--panel-bg);
  backdrop-filter: blur(12px);
  border-left: 1px solid var(--panel-bd);

  // 囲みボックスの寸法に対する相対値
  transform: translateX(100%);
  transition: transform 0.28s ease;
  pointer-events: auto;

  /* iOS安全域 */
  padding-right: calc(clamp(12px, 3vw, 24px) + env(safe-area-inset-right, 0px));
  font-size: var(--fs);
  z-index: core.$z-menu-offcanvas; /* タイマーとバックドロップより上 */
}

/* 背景の半透明幕（クリックで閉じる） */
.offcanvas-backdrop {
  left: 0;
  right: 0;

  // background: var(--panel-bg);
  background: #eae5da9b;
  backdrop-filter: blur(10px) saturate(130%);
  border-left: 1px solid var(--panel-bd);
  opacity: 0;
  transition: opacity 0.2s ease;
  z-index: core.$z-menu-backdrop; /* タイマーより上オフキャンバスより下 */
}

/* 開状態（[data-menu-open] を <body> に付与） */
body[data-menu-open="true"] .offcanvas {
  transform: translateX(0);
}

body[data-menu-open="true"] .offcanvas-backdrop {
  opacity: 1;
}

/* hidden 属性の扱い */
.offcanvas[hidden] {
  display: block;
} /* アニメさせたいので display 固定 */
.offcanvas-backdrop[hidden] {
  display: block;
} /* 同上 */
body:not([data-menu-open="true"]) .offcanvas,
body:not([data-menu-open="true"]) .offcanvas-backdrop {
  pointer-events: none;
}

/* 中身のレイアウト */
.offcanvas__head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.offcanvas__title {
  color: #f5f5f5;
  font-size: 1.1rem;
}

.offcanvas__close {
  background: transparent;
  color: #f5f5f5;
  font-size: 1.2rem;
  border: 1px solid var(--panel-bd);
  border-radius: 8px;
  padding: 0.25rem 0.5rem;
  cursor: pointer;
}

.offcanvas__list a {
  display: block;
  padding: 0.75rem 0.25rem;
  color: #f5f5f5;
  text-decoration: none;
  border-radius: 8px;
}

.offcanvas__list a:hover,
.offcanvas__list a:focus-visible {
  background: rgb(255 255 255 / 12%);
}

.offcanvas__list li {
  list-style: none;
}

nav div.clock-icon {
  /* 中央揃え */
  // display: flex;
  // align-items: center;
  // justify-content: center;
  padding-top: var(--pad);
  text-align: center;
}

.clock-icon {
  filter: drop-shadow(0 1px 2px rgb(255 255 255 / 30%));
  opacity: 0.85;

  /* 背景にうす〜く rgba(255,255,255,0.05) のサークルを敷いて、より「置いてある」感を出してもOK◎ */
}

/* タブレット最適化：少しだけ狭める＆文字を大きめに */

@media (width >= 800px) and (width <= 1280px) and (orientation: portrait) {
  :root {
    --menu-w: min(400px, 60vw);
  }

  .offcanvas__list a {
    padding: 0.85rem 0.25rem;
    font-size: 1.05rem;
  }
}

@media screen and (width >= 375px) and (width <= 999px) and (orientation: landscape) and (hover: none) {
  :root {
    --menu-w: min(300px, 50vw);
  }

  .offcanvas__head {
    margin-bottom: 8px;
  }

  .offcanvas__title {
    color: #f5f5f5;
    font-size: 1.1rem;
  }

  .offcanvas__list a {
    padding: 0.55rem 0.25rem;
    font-size: 1rem;
  }

  .svg-container {
    width: 50%; /* 親要素の幅を指定 */
    height: 50%;
    margin: 0 auto;
  }

  svg {
    width: 100%; /* 親要素に合わせて拡大縮小 */
    height: auto; /* アスペクト比を保持 */
  }
}

/* 低刺激モード */
@media (prefers-reduced-motion: reduce) {
  .offcanvas,
  .offcanvas-backdrop {
    transition: none;
  }
}
