:root {
  --menu-w: min(360px, 86vw);
  --panel-bg: rgba(14, 16, 32, 0.78); /* ギャラリーと調和する濃紺ガラス */
  --panel-bd: rgba(255, 255, 255, 0.18);
}

.offcanvas,
.offcanvas-backdrop {
  position: fixed;
  top: 0;
  bottom: 0;
  z-index: 80; /* タイマーより上（タイマーがz-index:50想定） */
}

/* パネル本体（右から） */
.offcanvas {
  right: 0;
  width: var(--menu-w);
  padding: 16px clamp(12px, 3vw, 24px);
  background: var(--panel-bg);
  backdrop-filter: blur(10px) saturate(140%);
  -webkit-backdrop-filter: blur(10px) saturate(140%);
  border-left: 1px solid var(--panel-bd);
  transform: translateX(100%);
  transition: transform 0.28s ease;
  pointer-events: auto;
  /* iOS安全域 */
  padding-right: calc(clamp(12px, 3vw, 24px) + env(safe-area-inset-right, 0px));
}

/* 背景の半透明幕（クリックで閉じる） */
.offcanvas-backdrop {
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.35);
  opacity: 0;
  transition: opacity 0.2s ease;
}

/* 開状態（[data-menu-open] を <body> に付与） */
body[data-menu-open="true"] .offcanvas {
  transform: translateX(0);
}
body[data-menu-open="true"] .offcanvas-backdrop {
  opacity: 1;
}

/* hidden 属性の扱い */
.offcanvas[hidden] {
  display: block;
} /* アニメさせたいので display 固定 */
.offcanvas-backdrop[hidden] {
  display: block;
} /* 同上 */
body:not([data-menu-open="true"]) .offcanvas,
body:not([data-menu-open="true"]) .offcanvas-backdrop {
  pointer-events: none;
}

/* 中身のレイアウト */
.offcanvas__head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}
.offcanvas__title {
  color: #f5f5f5;
  font-size: 1.1rem;
}
.offcanvas__close {
  background: transparent;
  color: #f5f5f5;
  font-size: 1.2rem;
  border: 1px solid var(--panel-bd);
  border-radius: 8px;
  padding: 0.25rem 0.5rem;
  cursor: pointer;
}
.offcanvas__list a {
  display: block;
  padding: 0.75rem 0.25rem;
  color: #f5f5f5;
  text-decoration: none;
  border-radius: 8px;
}
.offcanvas__list a:hover,
.offcanvas__list a:focus-visible {
  background: rgba(255, 255, 255, 0.12);
}

/* タブレット最適化：少しだけ狭める＆文字を大きめに */
@media (min-width: 600px) and (max-width: 1024px) {
  :root {
    --menu-w: min(420px, 60vw);
  }
  .offcanvas__list a {
    font-size: 1.05rem;
  }
}

/* 低刺激モード */
@media (prefers-reduced-motion: reduce) {
  .offcanvas,
  .offcanvas-backdrop {
    transition: none;
  }
}
